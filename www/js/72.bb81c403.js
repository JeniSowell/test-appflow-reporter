"use strict";(self["webpackChunkreporter"]=self["webpackChunkreporter"]||[]).push([[72],{90072:(e,o,s)=>{s.r(o),s.d(o,{default:()=>W});var r=s(83673),t=s(98880);const i={key:0,class:"sw-c-loader-overlay"},a={key:1,class:"fixed-center text-center"},n=(0,r._)("p",{class:"text-faded"}," Le lien que vous avez suivi a expiré ... ",-1),l=(0,r.Uk)(" Retour "),p={key:2,class:"row q-pt-lg",ref:"top"},d=(0,r._)("div",{class:"col-12 text-center q-pt-xl"},[(0,r._)("p",{style:{"font-family":"'Arima'",opacity:"0.7"}},[(0,r.Uk)(" Veuillez saisir un nouveau mot de passe. "),(0,r._)("br")])],-1),c={class:"col-10 offset-1 q-pb-sm"},u={class:"col-12 text-center"},m=(0,r.Uk)("Enregistrer");function f(e,o,s,f,h,w){const g=(0,r.up)("q-spinner-ios"),y=(0,r.up)("q-icon"),$=(0,r.up)("q-btn"),k=(0,r.up)("q-input"),v=(0,r.up)("q-field"),q=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(q,null,{default:(0,r.w5)((()=>[h.pageLoading?((0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(g,{class:"sw-c-loader",color:"white",size:"10px"})])):(0,r.kq)("",!0),h.tokenExist?((0,r.wg)(),(0,r.iD)("div",p,[d,(0,r._)("div",c,[(0,r._)("form",null,[(0,r.Wm)(v,{icon:"lock",label:"Mot de passe","icon-color":"primary","error-label":"Merci de saisir votre nouveau mot de passe",borderless:""},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{type:"password",modelValue:h.form.password,"onUpdate:modelValue":o[1]||(o[1]=e=>h.form.password=e),onChange:e.$v.form.password.$touch,onBlur:o[2]||(o[2]=(0,t.iM)((o=>e.$helpers.scrollToElement(e.$refs.top)),["stop"])),onKeyup:(0,t.D2)(w.submit,["enter"]),error:e.$v.form.password.$error,class:"full-width"},null,8,["modelValue","onChange","onKeyup","error"])])),_:1}),(0,r.Wm)(v,{icon:"lock",label:"Confirmez le mot de passe","icon-color":"primary","error-label":"Merci de saisir le même mot de passe",borderless:""},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{ref:"pws",type:"password",modelValue:h.form.password_confirmation,"onUpdate:modelValue":o[3]||(o[3]=e=>h.form.password_confirmation=e),onChange:e.$v.form.password_confirmation.$touch,onBlur:o[4]||(o[4]=(0,t.iM)((o=>e.$helpers.scrollToElement(e.$refs.top)),["stop"])),onKeyup:(0,t.D2)(w.submit,["enter"]),error:e.$v.form.password_confirmation.$error,class:"full-width"},null,8,["modelValue","onChange","onKeyup","error"])])),_:1})])]),(0,r._)("div",u,[(0,r.Wm)($,{color:"primary",onClick:w.submit},{default:(0,r.w5)((()=>[m])),_:1},8,["onClick"])])],512)):((0,r.wg)(),(0,r.iD)("div",a,[n,(0,r.Wm)($,{color:"primary",style:{width:"130px"},onClick:o[0]||(o[0]=o=>e.$router.push("/"))},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{name:"arrow_back",color:"white"}),l])),_:1})]))])),_:1})}s(65363);var h=s(11084);const w={mounted(){this.$q.loading.hide()},data(){return{infoOnReset:!1,form:{password:"",password_confirmation:""},tokenExist:!1,pageLoading:!1}},validations:{form:{password:{required:h.C1,minLength:(0,h.Ei)(6)},password_confirmation:{sameAsPass:(0,h.sH)("password")}}},beforeMount(){this.loginWithToken()},methods:{async loginWithToken(){this.pageLoading=!0;const e=this.$route.query.key.replace(/\\n/g,""),o=decodeURIComponent(escape(window.atob(e))).split(","),s=o[0].replace("{","").split(":")[1],r=o[1].replace("}","").split(":")[1];await this.$SowellProxy.authenticateWithToken({email:s,token:r}).then((e=>{this.tokenExist=!0,this.pageLoading=!1})).catch((()=>{this.pageLoading=!1,this.tokenExist=!1}))},async submit(){this.$q.loading.show({delay:0}),this.$v.form.$touch(),this.$v.form.$error?(this.$q.notify({message:"Merci de saisir votre nouveau mot de passe deux fois",type:"warning",position:"top"}),this.$q.loading.hide()):await this.$SowellProxy.updateUserPassword(this.form.password).then((()=>{this.$router.push({path:"/"}),this.$q.notify({message:"Votre Mot de passe a été modifié",type:"info",position:"top"})}),(()=>{this.$q.notify({message:"Une erreur s'est produite",type:"warning",position:"top"})}))}}};var g=s(74260),y=s(24379),$=s(18506),k=s(48240),v=s(24554),q=s(86115),_=s(34842),b=s(7518),x=s.n(b);const C=(0,g.Z)(w,[["render",f]]),W=C;x()(w,"components",{QPage:y.Z,QSpinnerIos:$.Z,QBtn:k.Z,QIcon:v.Z,QField:q.Z,QInput:_.Z})}}]);